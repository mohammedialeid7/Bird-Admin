(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70065,e=>{"use strict";var t=e.i(43476),r=e.i(47163);function a({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...a})}function s({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...a})}function n({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",e),...a})}function i({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",e),...a})}function d({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",e),...a})}e.s(["Card",()=>a,"CardContent",()=>d,"CardDescription",()=>i,"CardHeader",()=>s,"CardTitle",()=>n])},67585,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"BailoutToCSR",{enumerable:!0,get:function(){return s}});let a=e.r(32061);function s({reason:e,children:t}){if("u"<typeof window)throw Object.defineProperty(new a.BailoutToCSRError(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return t}},9885,(e,t,r)=>{"use strict";function a(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"encodeURIPath",{enumerable:!0,get:function(){return a}})},52157,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"PreloadChunks",{enumerable:!0,get:function(){return o}});let a=e.r(43476),s=e.r(74080),n=e.r(63599),i=e.r(9885),d=e.r(43369);function o({moduleIds:e}){if("u">typeof window)return null;let t=n.workAsyncStorage.getStore();if(void 0===t)return null;let r=[];if(t.reactLoadableManifest&&e){let a=t.reactLoadableManifest;for(let t of e){if(!a[t])continue;let e=a[t].files;r.push(...e)}}if(0===r.length)return null;let o=(0,d.getDeploymentIdQueryOrEmptyString)();return(0,a.jsx)(a.Fragment,{children:r.map(e=>{let r=`${t.assetPrefix}/_next/${(0,i.encodeURIPath)(e)}${o}`;return e.endsWith(".css")?(0,a.jsx)("link",{precedence:"dynamic",href:r,rel:"stylesheet",as:"style",nonce:t.nonce},e):((0,s.preload)(r,{as:"script",fetchPriority:"low",nonce:t.nonce}),null)})})}},69093,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return l}});let a=e.r(43476),s=e.r(71645),n=e.r(67585),i=e.r(52157);function d(e){return{default:e&&"default"in e?e.default:e}}let o={loader:()=>Promise.resolve(d(()=>null)),loading:null,ssr:!0},l=function(e){let t={...o,...e},r=(0,s.lazy)(()=>t.loader().then(d)),l=t.loading;function c(e){let d=l?(0,a.jsx)(l,{isLoading:!0,pastDelay:!0,error:null}):null,o=!t.ssr||!!t.loading,c=o?s.Suspense:s.Fragment,u=t.ssr?(0,a.jsxs)(a.Fragment,{children:["u"<typeof window?(0,a.jsx)(i.PreloadChunks,{moduleIds:t.modules}):null,(0,a.jsx)(r,{...e})]}):(0,a.jsx)(n.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(r,{...e})});return(0,a.jsx)(c,{...o?{fallback:d}:{},children:u})}return c.displayName="LoadableComponent",c}},70703,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return s}});let a=e.r(55682)._(e.r(69093));function s(e,t){let r={};"function"==typeof e&&(r.loader=e);let s={...r,...t};return(0,a.default)({...s,modules:s.loadableGenerated?.modules})}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},69505,e=>{"use strict";var t=e.i(43476);let r=(0,e.i(70703).default)(()=>e.A(72221),{loadableGenerated:{modules:[93836]},ssr:!1,loading:()=>(0,t.jsx)("div",{className:"w-full h-full min-h-[300px] rounded-lg bg-muted flex items-center justify-center",children:(0,t.jsx)("p",{className:"text-muted-foreground",children:"Loading map..."})})});function a(e){return(0,t.jsx)(r,{...e})}e.s(["MapView",()=>a])},71689,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},97167,e=>{"use strict";var t=e.i(68834),r=e.i(27250);let a=(0,t.create)((e,t)=>({warehouses:r.mockWarehouses,getWarehouses:()=>t().warehouses,getWarehouseById:e=>t().warehouses.find(t=>t.id===e),updateWarehouse:(t,r)=>{e(e=>({warehouses:e.warehouses.map(e=>e.id===t?{...e,...r}:e)}))}}));e.s(["useWarehouseStore",0,a])},21961,e=>{"use strict";var t=e.i(68834),r=e.i(27250);let a=(0,t.create)((e,t)=>({zones:r.mockZones,getZones:()=>t().zones,getZoneById:e=>t().zones.find(t=>t.id===e),updateZone:(t,r)=>{e(e=>({zones:e.zones.map(e=>e.id===t?{...e,...r}:e)}))}}));e.s(["useZoneStore",0,a])},93438,e=>{"use strict";var t=e.i(68834),r=e.i(27250);let a=(0,t.create)((e,t)=>({riders:r.mockRiders,riderZones:r.mockRiderZones,riderLocations:r.mockRiderLocations,getRiders:e=>{let r=t().riders;if(e?.warehouseId&&(r=r.filter(t=>t.warehouse_id===e.warehouseId)),e?.zoneId){let a=t().riderZones.filter(t=>t.zone_id===e.zoneId).map(e=>e.rider_id);r=r.filter(e=>a.includes(e.id))}return e?.activeOnly&&(r=r.filter(e=>e.is_active)),r},getRiderById:e=>t().riders.find(t=>t.id===e),getRiderZones:e=>t().riderZones.filter(t=>t.rider_id===e),getRiderLocation:e=>t().riderLocations.find(t=>t.rider_id===e),addRiderZone:(r,a)=>{t().riderZones.some(e=>e.rider_id===r&&e.zone_id===a)||e(e=>({riderZones:[...e.riderZones,{id:`rz-${Date.now()}`,rider_id:r,zone_id:a}]}))},removeRiderZone:(t,r)=>{e(e=>({riderZones:e.riderZones.filter(e=>e.rider_id!==t||e.zone_id!==r)}))}}));e.s(["useRiderStore",0,a])},84744,e=>{"use strict";var t=e.i(68834),r=e.i(27250);let a=(0,t.create)((e,t)=>({orders:r.mockOrders,statusLogs:r.mockStatusLogs,proofs:r.mockProofs,getOrders:e=>{let r=t().orders;if(e?.status&&e.status.length>0&&(r=r.filter(t=>e.status.includes(t.status))),e?.type&&e.type.length>0&&(r=r.filter(t=>e.type.includes(t.type))),e?.zoneId&&(r=r.filter(t=>t.zone_id===e.zoneId)),e?.warehouseId&&(r=r.filter(t=>t.warehouse_id===e.warehouseId)),e?.search){let t=e.search.toLowerCase();r=r.filter(e=>e.customer_name.toLowerCase().includes(t)||e.customer_phone.includes(t)||e.short_national_address.toLowerCase().includes(t)||e.id.toLowerCase().includes(t))}if(e?.dateFrom&&(r=r.filter(t=>t.created_at>=e.dateFrom)),e?.dateTo){let t=e.dateTo+"T23:59:59Z";r=r.filter(e=>e.created_at<=t)}return r},getOrderById:e=>t().orders.find(t=>t.id===e),getOrderLogs:e=>t().statusLogs.filter(t=>t.order_id===e).sort((e,t)=>new Date(e.created_at).getTime()-new Date(t.created_at).getTime()),getOrderProof:e=>t().proofs.find(t=>t.order_id===e),createOrder:t=>{let r=new Date().toISOString(),a={...t,id:`ord-${Date.now()}`,status:"pending",created_at:r,updated_at:r},s={id:`log-${Date.now()}`,order_id:a.id,status:"pending",note:"Order created manually",changed_by:"admin-001",created_at:r};return e(e=>({orders:[a,...e.orders],statusLogs:[...e.statusLogs,s]})),a},updateOrder:(t,r)=>{e(e=>({orders:e.orders.map(e=>e.id===t?{...e,...r,updated_at:new Date().toISOString()}:e)}))},cancelOrder:t=>{let r=new Date().toISOString();e(e=>({orders:e.orders.map(e=>e.id===t?{...e,status:"cancelled",updated_at:r}:e),statusLogs:[...e.statusLogs,{id:`log-cancel-${Date.now()}`,order_id:t,status:"cancelled",note:"Order cancelled by admin",changed_by:"admin-001",created_at:r}]}))},reassignOrder:(t,r)=>{let a=new Date().toISOString();e(e=>({orders:e.orders.map(e=>e.id===t?{...e,rider_id:r,status:"assigned",auto_assigned:!1,updated_at:a}:e),statusLogs:[...e.statusLogs,{id:`log-reassign-${Date.now()}`,order_id:t,status:"assigned",note:"Reassigned to rider by admin",changed_by:"admin-001",created_at:a}]}))}}));e.s(["useOrderStore",0,a])},71829,e=>{"use strict";e.s(["ALL_STATUSES",0,["pending","assigned","picked_up","in_transit","delivered","failed","returning","returned_to_warehouse","cancelled"],"ALL_TYPES",0,["delivery","return_pickup","failed_return"],"DEFAULT_ZOOM",0,11,"ITEMS_PER_PAGE",0,15,"RIYADH_CENTER",0,{lat:24.7136,lng:46.6753},"STATUS_COLORS",0,{pending:"bg-yellow-100 text-yellow-800 border-yellow-300",assigned:"bg-blue-100 text-blue-800 border-blue-300",picked_up:"bg-indigo-100 text-indigo-800 border-indigo-300",in_transit:"bg-purple-100 text-purple-800 border-purple-300",delivered:"bg-green-100 text-green-800 border-green-300",failed:"bg-red-100 text-red-800 border-red-300",returning:"bg-orange-100 text-orange-800 border-orange-300",returned_to_warehouse:"bg-teal-100 text-teal-800 border-teal-300",cancelled:"bg-gray-100 text-gray-800 border-gray-300"},"STATUS_LABELS",0,{pending:"Pending",assigned:"Assigned",picked_up:"Picked Up",in_transit:"In Transit",delivered:"Delivered",failed:"Failed",returning:"Returning",returned_to_warehouse:"Returned",cancelled:"Cancelled"},"TYPE_COLORS",0,{delivery:"bg-blue-100 text-blue-800 border-blue-300",return_pickup:"bg-orange-100 text-orange-800 border-orange-300",failed_return:"bg-red-100 text-red-800 border-red-300"},"TYPE_LABELS",0,{delivery:"Delivery",return_pickup:"Return Pickup",failed_return:"Failed Return"}])},94179,e=>{"use strict";var t=e.i(43476),r=e.i(25913),a=e.i(86011),s=e.i(47163);let n=(0,r.cva)("inline-flex items-center justify-center rounded-full border border-transparent px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border-border text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground",ghost:"[a&]:hover:bg-accent [a&]:hover:text-accent-foreground",link:"text-primary underline-offset-4 [a&]:hover:underline"}},defaultVariants:{variant:"default"}});function i({className:e,variant:r="default",asChild:i=!1,...d}){let o=i?a.Slot.Root:"span";return(0,t.jsx)(o,{"data-slot":"badge","data-variant":r,className:(0,s.cn)(n({variant:r}),e),...d})}e.s(["Badge",()=>i])},52330,68836,e=>{"use strict";var t=e.i(43476),r=e.i(94179),a=e.i(71829);function s({status:e}){return(0,t.jsx)(r.Badge,{variant:"outline",className:`${a.STATUS_COLORS[e]} border`,children:a.STATUS_LABELS[e]})}function n({type:e}){return(0,t.jsx)(r.Badge,{variant:"outline",className:`${a.TYPE_COLORS[e]} border`,children:a.TYPE_LABELS[e]})}e.s(["OrderStatusBadge",()=>s],52330),e.s(["OrderTypeBadge",()=>n],68836)},15975,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(22016),s=e.i(18566),n=e.i(71689),i=e.i(75254);let d=(0,i.default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),o=(0,i.default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);var l=e.i(68656),l=l;let c=(0,i.default)("link-2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);var u=e.i(67881),g=e.i(70065),f=e.i(94179),x=e.i(95926),m=e.i(64053),p=e.i(47163);function h({...e}){return(0,t.jsx)(m.Dialog.Root,{"data-slot":"dialog",...e})}function j({...e}){return(0,t.jsx)(m.Dialog.Portal,{"data-slot":"dialog-portal",...e})}function v({className:e,...r}){return(0,t.jsx)(m.Dialog.Overlay,{"data-slot":"dialog-overlay",className:(0,p.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...r})}function b({className:e,children:r,showCloseButton:a=!0,...s}){return(0,t.jsxs)(j,{"data-slot":"dialog-portal",children:[(0,t.jsx)(v,{}),(0,t.jsxs)(m.Dialog.Content,{"data-slot":"dialog-content",className:(0,p.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 outline-none sm:max-w-lg",e),...s,children:[r,a&&(0,t.jsxs)(m.Dialog.Close,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,t.jsx)(x.XIcon,{}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function y({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"dialog-header",className:(0,p.cn)("flex flex-col gap-2 text-center sm:text-left",e),...r})}function _({className:e,showCloseButton:r=!1,children:a,...s}){return(0,t.jsxs)("div",{"data-slot":"dialog-footer",className:(0,p.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...s,children:[a,r&&(0,t.jsx)(m.Dialog.Close,{asChild:!0,children:(0,t.jsx)(u.Button,{variant:"outline",children:"Close"})})]})}function w({className:e,...r}){return(0,t.jsx)(m.Dialog.Title,{"data-slot":"dialog-title",className:(0,p.cn)("text-lg leading-none font-semibold",e),...r})}var C=e.i(62870),N=e.i(52330),O=e.i(68836),S=e.i(71829);function A({logs:e}){return 0===e.length?(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"No status history."}):(0,t.jsx)("div",{className:"space-y-0",children:e.map((r,a)=>(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full bg-primary mt-1.5 shrink-0"}),a<e.length-1&&(0,t.jsx)("div",{className:"w-0.5 flex-1 bg-border"})]}),(0,t.jsxs)("div",{className:"pb-6",children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:S.STATUS_LABELS[r.status]??r.status}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[new Date(r.created_at).toLocaleString("en-SA",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),r.changed_by&&` \xb7 by ${r.changed_by}`]}),r.note&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:r.note})]})]},r.id))})}function D({proof:e}){let[a,s]=(0,r.useState)(!1);return(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex gap-4 flex-wrap",children:[(0,t.jsx)("button",{onClick:()=>s(!0),className:"relative w-40 h-30 rounded-lg overflow-hidden border hover:ring-2 hover:ring-primary transition-all cursor-pointer",children:(0,t.jsx)("img",{src:e.photo_url,alt:"Proof photo",className:"w-full h-full object-cover"})}),e.signature_url&&(0,t.jsx)("div",{className:"relative w-40 h-24 rounded-lg overflow-hidden border",children:(0,t.jsx)("img",{src:e.signature_url,alt:"Signature",className:"w-full h-full object-contain"})})]}),e.failure_reason&&(0,t.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-red-800",children:"Failure Reason"}),(0,t.jsx)("p",{className:"text-sm text-red-700",children:e.failure_reason})]}),e.item_condition_note&&(0,t.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-blue-800",children:"Item Condition"}),(0,t.jsx)("p",{className:"text-sm text-blue-700",children:e.item_condition_note})]}),(0,t.jsx)(h,{open:a,onOpenChange:s,children:(0,t.jsxs)(b,{className:"max-w-2xl",children:[(0,t.jsx)(w,{children:"Proof Photo"}),(0,t.jsx)("img",{src:e.photo_url,alt:"Proof photo full size",className:"w-full rounded-lg"})]})})]})}var k=e.i(69505),R=e.i(30030),T=e.i(20783),z=e.i(26999),P=e.i(81140),L=e.i(91918),B="AlertDialog",[I,E]=(0,R.createContextScope)(B,[z.createDialogScope]),Z=(0,z.createDialogScope)(),M=e=>{let{__scopeAlertDialog:r,...a}=e,s=Z(r);return(0,t.jsx)(z.Root,{...s,...a,modal:!0})};M.displayName=B;var $=r.forwardRef((e,r)=>{let{__scopeAlertDialog:a,...s}=e,n=Z(a);return(0,t.jsx)(z.Trigger,{...n,...s,ref:r})});$.displayName="AlertDialogTrigger";var U=e=>{let{__scopeAlertDialog:r,...a}=e,s=Z(r);return(0,t.jsx)(z.Portal,{...s,...a})};U.displayName="AlertDialogPortal";var F=r.forwardRef((e,r)=>{let{__scopeAlertDialog:a,...s}=e,n=Z(a);return(0,t.jsx)(z.Overlay,{...n,...s,ref:r})});F.displayName="AlertDialogOverlay";var H="AlertDialogContent",[W,Y]=I(H),V=(0,L.createSlottable)("AlertDialogContent"),q=r.forwardRef((e,a)=>{let{__scopeAlertDialog:s,children:n,...i}=e,d=Z(s),o=r.useRef(null),l=(0,T.useComposedRefs)(a,o),c=r.useRef(null);return(0,t.jsx)(z.WarningProvider,{contentName:H,titleName:G,docsSlug:"alert-dialog",children:(0,t.jsx)(W,{scope:s,cancelRef:c,children:(0,t.jsxs)(z.Content,{role:"alertdialog",...d,...i,ref:l,onOpenAutoFocus:(0,P.composeEventHandlers)(i.onOpenAutoFocus,e=>{e.preventDefault(),c.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,t.jsx)(V,{children:n}),(0,t.jsx)(er,{contentRef:o})]})})})});q.displayName=H;var G="AlertDialogTitle",K=r.forwardRef((e,r)=>{let{__scopeAlertDialog:a,...s}=e,n=Z(a);return(0,t.jsx)(z.Title,{...n,...s,ref:r})});K.displayName=G;var X="AlertDialogDescription",Q=r.forwardRef((e,r)=>{let{__scopeAlertDialog:a,...s}=e,n=Z(a);return(0,t.jsx)(z.Description,{...n,...s,ref:r})});Q.displayName=X;var J=r.forwardRef((e,r)=>{let{__scopeAlertDialog:a,...s}=e,n=Z(a);return(0,t.jsx)(z.Close,{...n,...s,ref:r})});J.displayName="AlertDialogAction";var ee="AlertDialogCancel",et=r.forwardRef((e,r)=>{let{__scopeAlertDialog:a,...s}=e,{cancelRef:n}=Y(ee,a),i=Z(a),d=(0,T.useComposedRefs)(r,n);return(0,t.jsx)(z.Close,{...i,...s,ref:d})});et.displayName=ee;var er=({contentRef:e})=>{let t=`\`${H}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${H}\` by passing a \`${X}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${H}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return r.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null};e.s(["Action",()=>J,"AlertDialog",()=>M,"AlertDialogAction",()=>J,"AlertDialogCancel",()=>et,"AlertDialogContent",()=>q,"AlertDialogDescription",()=>Q,"AlertDialogOverlay",()=>F,"AlertDialogPortal",()=>U,"AlertDialogTitle",()=>K,"AlertDialogTrigger",()=>$,"Cancel",()=>et,"Content",()=>q,"Description",()=>Q,"Overlay",()=>F,"Portal",()=>U,"Root",()=>M,"Title",()=>K,"Trigger",()=>$,"createAlertDialogScope",()=>E],91162);var ea=e.i(91162),ea=ea;function es({...e}){return(0,t.jsx)(ea.Root,{"data-slot":"alert-dialog",...e})}function en({...e}){return(0,t.jsx)(ea.Portal,{"data-slot":"alert-dialog-portal",...e})}function ei({className:e,...r}){return(0,t.jsx)(ea.Overlay,{"data-slot":"alert-dialog-overlay",className:(0,p.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...r})}function ed({className:e,size:r="default",...a}){return(0,t.jsxs)(en,{children:[(0,t.jsx)(ei,{}),(0,t.jsx)(ea.Content,{"data-slot":"alert-dialog-content","data-size":r,className:(0,p.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 group/alert-dialog-content fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 data-[size=sm]:max-w-xs data-[size=default]:sm:max-w-lg",e),...a})]})}function eo({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,p.cn)("grid grid-rows-[auto_1fr] place-items-center gap-1.5 text-center has-data-[slot=alert-dialog-media]:grid-rows-[auto_auto_1fr] has-data-[slot=alert-dialog-media]:gap-x-6 sm:group-data-[size=default]/alert-dialog-content:place-items-start sm:group-data-[size=default]/alert-dialog-content:text-left sm:group-data-[size=default]/alert-dialog-content:has-data-[slot=alert-dialog-media]:grid-rows-[auto_1fr]",e),...r})}function el({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,p.cn)("flex flex-col-reverse gap-2 group-data-[size=sm]/alert-dialog-content:grid group-data-[size=sm]/alert-dialog-content:grid-cols-2 sm:flex-row sm:justify-end",e),...r})}function ec({className:e,...r}){return(0,t.jsx)(ea.Title,{"data-slot":"alert-dialog-title",className:(0,p.cn)("text-lg font-semibold sm:group-data-[size=default]/alert-dialog-content:group-has-data-[slot=alert-dialog-media]/alert-dialog-content:col-start-2",e),...r})}function eu({className:e,...r}){return(0,t.jsx)(ea.Description,{"data-slot":"alert-dialog-description",className:(0,p.cn)("text-muted-foreground text-sm",e),...r})}function eg({className:e,variant:r="default",size:a="default",...s}){return(0,t.jsx)(u.Button,{variant:r,size:a,asChild:!0,children:(0,t.jsx)(ea.Action,{"data-slot":"alert-dialog-action",className:(0,p.cn)(e),...s})})}function ef({className:e,variant:r="outline",size:a="default",...s}){return(0,t.jsx)(u.Button,{variant:r,size:a,asChild:!0,children:(0,t.jsx)(ea.Cancel,{"data-slot":"alert-dialog-cancel",className:(0,p.cn)(e),...s})})}function ex({open:e,onConfirm:r,onCancel:a,title:s,description:n,confirmText:i="Confirm",destructive:d=!1}){return(0,t.jsx)(es,{open:e,onOpenChange:e=>!e&&a(),children:(0,t.jsxs)(ed,{children:[(0,t.jsxs)(eo,{children:[(0,t.jsx)(ec,{children:s}),(0,t.jsx)(eu,{children:n})]}),(0,t.jsxs)(el,{children:[(0,t.jsx)(ef,{onClick:a,children:"Cancel"}),(0,t.jsx)(eg,{onClick:r,className:d?"bg-destructive text-white hover:bg-destructive/90":"",children:i})]})]})})}var em=e.i(84744),ep=e.i(93438),eh=e.i(97167),ej=e.i(21961),ev=e.i(46696);function eb({params:e}){let{id:i}=(0,r.use)(e),x=(0,s.useRouter)(),m=(0,em.useOrderStore)(e=>e.getOrderById(i)),p=(0,em.useOrderStore)(e=>e.getOrderLogs(i)),j=(0,em.useOrderStore)(e=>e.getOrderProof(i)),v=(0,em.useOrderStore)(e=>e.orders),S=(0,em.useOrderStore)(e=>e.cancelOrder),R=(0,em.useOrderStore)(e=>e.reassignOrder),T=(0,ep.useRiderStore)(e=>e.riders),z=(0,ep.useRiderStore)(e=>e.riderZones),P=(0,eh.useWarehouseStore)(e=>e.warehouses),L=(0,ej.useZoneStore)(e=>e.zones),[B,I]=(0,r.useState)(!1),[E,Z]=(0,r.useState)(""),[M,$]=(0,r.useState)(!1);if(!m)return(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("p",{className:"text-muted-foreground",children:"Order not found."}),(0,t.jsx)(u.Button,{variant:"link",onClick:()=>x.push("/orders"),children:"Back to Orders"})]});let U=P.find(e=>e.id===m.warehouse_id),F=L.find(e=>e.id===m.zone_id),H=m.rider_id?T.find(e=>e.id===m.rider_id):null,W=z.filter(e=>e.zone_id===m.zone_id).map(e=>e.rider_id),Y=T.filter(e=>W.includes(e.id)&&e.is_active),V=v.find(e=>e.parent_order_id===m.id),q=m.parent_order_id?v.find(e=>e.id===m.parent_order_id):null,G=!["delivered","cancelled","returned_to_warehouse"].includes(m.status);return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(u.Button,{variant:"ghost",size:"sm",onClick:()=>x.push("/orders"),children:[(0,t.jsx)(n.ArrowLeft,{className:"w-4 h-4 mr-1"})," Back to Orders"]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 flex-wrap",children:[(0,t.jsx)(O.OrderTypeBadge,{type:m.type}),(0,t.jsx)(N.OrderStatusBadge,{status:m.status}),m.auto_assigned&&(0,t.jsx)(f.Badge,{variant:"secondary",children:"Auto-assigned"}),m.source_ref&&(0,t.jsx)("span",{className:"text-xs text-muted-foreground font-mono",children:m.source_ref})]}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Created ",new Date(m.created_at).toLocaleString("en-SA")]})]}),G&&(0,t.jsx)(u.Button,{variant:"destructive",size:"sm",onClick:()=>$(!0),children:"Cancel Order"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,t.jsxs)(g.Card,{children:[(0,t.jsx)(g.CardHeader,{children:(0,t.jsx)(g.CardTitle,{className:"text-base",children:"Customer Info"})}),(0,t.jsxs)(g.CardContent,{className:"space-y-2",children:[(0,t.jsx)("p",{className:"font-medium",children:m.customer_name}),(0,t.jsxs)("a",{href:`tel:${m.customer_phone}`,className:"flex items-center gap-2 text-sm text-blue-600 hover:underline",children:[(0,t.jsx)(d,{className:"w-4 h-4"}),m.customer_phone]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,t.jsx)(o,{className:"w-4 h-4"}),m.short_national_address]}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Warehouse: ",U?.name," · Zone: ",F?.name]})]})]}),(0,t.jsx)("div",{className:"h-[250px] rounded-lg overflow-hidden border",children:(0,t.jsx)(k.MapView,{center:{lat:m.lat,lng:m.lng},zoom:15,orders:[m]})}),(0,t.jsxs)(g.Card,{children:[(0,t.jsx)(g.CardHeader,{children:(0,t.jsx)(g.CardTitle,{className:"text-base",children:"Assignment"})}),(0,t.jsx)(g.CardContent,{children:H?(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(l.default,{className:"w-8 h-8 text-muted-foreground"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:H.full_name}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:H.phone})]})]}),(0,t.jsx)(u.Button,{variant:"outline",size:"sm",onClick:()=>I(!0),children:"Reassign"})]}):(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("p",{className:"text-sm text-yellow-600 font-medium",children:"⚠ Unassigned"}),(0,t.jsx)(u.Button,{variant:"outline",size:"sm",onClick:()=>I(!0),children:"Assign Rider"})]})})]}),m.pod_required&&j&&(0,t.jsxs)(g.Card,{children:[(0,t.jsx)(g.CardHeader,{children:(0,t.jsx)(g.CardTitle,{className:"text-base",children:"Proof of Delivery"})}),(0,t.jsx)(g.CardContent,{children:(0,t.jsx)(D,{proof:j})})]}),(V||q)&&(0,t.jsxs)(g.Card,{children:[(0,t.jsx)(g.CardHeader,{children:(0,t.jsxs)(g.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,t.jsx)(c,{className:"w-4 h-4"}),"Linked Orders"]})}),(0,t.jsxs)(g.CardContent,{className:"space-y-2",children:[q&&(0,t.jsxs)(a.default,{href:`/orders/${q.id}`,className:"flex items-center gap-2 text-sm text-blue-600 hover:underline",children:["Parent: ",q.id," (",q.type.replace("_"," "),")"]}),V&&(0,t.jsxs)(a.default,{href:`/orders/${V.id}`,className:"flex items-center gap-2 text-sm text-blue-600 hover:underline",children:["Child: ",V.id," (",V.type.replace("_"," "),")"]})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(g.Card,{children:[(0,t.jsx)(g.CardHeader,{children:(0,t.jsx)(g.CardTitle,{className:"text-base",children:"Status Timeline"})}),(0,t.jsx)(g.CardContent,{children:(0,t.jsx)(A,{logs:p})})]}),m.notes&&(0,t.jsxs)(g.Card,{className:"mt-6",children:[(0,t.jsx)(g.CardHeader,{children:(0,t.jsx)(g.CardTitle,{className:"text-base",children:"Notes"})}),(0,t.jsx)(g.CardContent,{children:(0,t.jsx)("p",{className:"text-sm",children:m.notes})})]})]})]}),(0,t.jsx)(h,{open:B,onOpenChange:I,children:(0,t.jsxs)(b,{children:[(0,t.jsx)(y,{children:(0,t.jsx)(w,{children:"Reassign Order"})}),(0,t.jsxs)("div",{className:"py-4",children:[(0,t.jsxs)(C.Select,{value:E,onValueChange:Z,children:[(0,t.jsx)(C.SelectTrigger,{children:(0,t.jsx)(C.SelectValue,{placeholder:"Select a rider"})}),(0,t.jsx)(C.SelectContent,{children:Y.map(e=>(0,t.jsx)(C.SelectItem,{value:e.id,children:e.full_name},e.id))})]}),0===Y.length&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"No active riders available in this zone."})]}),(0,t.jsxs)(_,{children:[(0,t.jsx)(u.Button,{variant:"outline",onClick:()=>I(!1),children:"Cancel"}),(0,t.jsx)(u.Button,{onClick:()=>{E&&(R(m.id,E),I(!1),Z(""),ev.toast.success("Order reassigned successfully"))},disabled:!E,children:"Reassign"})]})]})}),(0,t.jsx)(ex,{open:M,onConfirm:()=>{S(m.id),$(!1),ev.toast.success("Order cancelled")},onCancel:()=>$(!1),title:"Cancel Order",description:"Are you sure you want to cancel this order? This action cannot be undone.",confirmText:"Cancel Order",destructive:!0})]})}e.s(["default",()=>eb],15975)},72221,e=>{e.v(t=>Promise.all(["static/chunks/0757aa59f42e7227.js","static/chunks/92775ae1698e5da0.css"].map(t=>e.l(t))).then(()=>t(93836)))}]);