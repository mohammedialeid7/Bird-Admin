module.exports=[5522,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,type:d,...e}){return(0,b.jsx)("input",{type:d,"data-slot":"input",className:(0,c.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...e})}a.s(["Input",()=>d])},1640,a=>{"use strict";var b=a.i(20226),c=a.i(95116);let d=(0,b.create)((a,b)=>({warehouses:c.mockWarehouses,getWarehouses:()=>b().warehouses,getWarehouseById:a=>b().warehouses.find(b=>b.id===a),updateWarehouse:(b,c)=>{a(a=>({warehouses:a.warehouses.map(a=>a.id===b?{...a,...c}:a)}))}}));a.s(["useWarehouseStore",0,d])},21466,a=>{"use strict";var b=a.i(20226),c=a.i(95116);let d=(0,b.create)((a,b)=>({zones:c.mockZones,getZones:()=>b().zones,getZoneById:a=>b().zones.find(b=>b.id===a),updateZone:(b,c)=>{a(a=>({zones:a.zones.map(a=>a.id===b?{...a,...c}:a)}))}}));a.s(["useZoneStore",0,d])},76464,a=>{"use strict";var b=a.i(20226),c=a.i(95116);let d=(0,b.create)((a,b)=>({riders:c.mockRiders,riderZones:c.mockRiderZones,riderLocations:c.mockRiderLocations,getRiders:a=>{let c=b().riders;if(a?.warehouseId&&(c=c.filter(b=>b.warehouse_id===a.warehouseId)),a?.zoneId){let d=b().riderZones.filter(b=>b.zone_id===a.zoneId).map(a=>a.rider_id);c=c.filter(a=>d.includes(a.id))}return a?.activeOnly&&(c=c.filter(a=>a.is_active)),c},getRiderById:a=>b().riders.find(b=>b.id===a),getRiderZones:a=>b().riderZones.filter(b=>b.rider_id===a),getRiderLocation:a=>b().riderLocations.find(b=>b.rider_id===a),addRiderZone:(c,d)=>{b().riderZones.some(a=>a.rider_id===c&&a.zone_id===d)||a(a=>({riderZones:[...a.riderZones,{id:`rz-${Date.now()}`,rider_id:c,zone_id:d}]}))},removeRiderZone:(b,c)=>{a(a=>({riderZones:a.riderZones.filter(a=>a.rider_id!==b||a.zone_id!==c)}))}}));a.s(["useRiderStore",0,d])},1002,a=>{"use strict";var b=a.i(20226),c=a.i(95116);let d=(0,b.create)((a,b)=>({orders:c.mockOrders,statusLogs:c.mockStatusLogs,proofs:c.mockProofs,getOrders:a=>{let c=b().orders;if(a?.status&&a.status.length>0&&(c=c.filter(b=>a.status.includes(b.status))),a?.type&&a.type.length>0&&(c=c.filter(b=>a.type.includes(b.type))),a?.zoneId&&(c=c.filter(b=>b.zone_id===a.zoneId)),a?.warehouseId&&(c=c.filter(b=>b.warehouse_id===a.warehouseId)),a?.search){let b=a.search.toLowerCase();c=c.filter(a=>a.customer_name.toLowerCase().includes(b)||a.customer_phone.includes(b)||a.short_national_address.toLowerCase().includes(b)||a.id.toLowerCase().includes(b))}if(a?.dateFrom&&(c=c.filter(b=>b.created_at>=a.dateFrom)),a?.dateTo){let b=a.dateTo+"T23:59:59Z";c=c.filter(a=>a.created_at<=b)}return c},getOrderById:a=>b().orders.find(b=>b.id===a),getOrderLogs:a=>b().statusLogs.filter(b=>b.order_id===a).sort((a,b)=>new Date(a.created_at).getTime()-new Date(b.created_at).getTime()),getOrderProof:a=>b().proofs.find(b=>b.order_id===a),createOrder:b=>{let c=new Date().toISOString(),d={...b,id:`ord-${Date.now()}`,status:"pending",created_at:c,updated_at:c},e={id:`log-${Date.now()}`,order_id:d.id,status:"pending",note:"Order created manually",changed_by:"admin-001",created_at:c};return a(a=>({orders:[d,...a.orders],statusLogs:[...a.statusLogs,e]})),d},updateOrder:(b,c)=>{a(a=>({orders:a.orders.map(a=>a.id===b?{...a,...c,updated_at:new Date().toISOString()}:a)}))},cancelOrder:b=>{let c=new Date().toISOString();a(a=>({orders:a.orders.map(a=>a.id===b?{...a,status:"cancelled",updated_at:c}:a),statusLogs:[...a.statusLogs,{id:`log-cancel-${Date.now()}`,order_id:b,status:"cancelled",note:"Order cancelled by admin",changed_by:"admin-001",created_at:c}]}))},reassignOrder:(b,c)=>{let d=new Date().toISOString();a(a=>({orders:a.orders.map(a=>a.id===b?{...a,rider_id:c,status:"assigned",auto_assigned:!1,updated_at:d}:a),statusLogs:[...a.statusLogs,{id:`log-reassign-${Date.now()}`,order_id:b,status:"assigned",note:"Reassigned to rider by admin",changed_by:"admin-001",created_at:d}]}))}}));a.s(["useOrderStore",0,d])},88237,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,b.jsx)("table",{"data-slot":"table",className:(0,c.cn)("w-full caption-bottom text-sm",a),...d})})}function e({className:a,...d}){return(0,b.jsx)("thead",{"data-slot":"table-header",className:(0,c.cn)("[&_tr]:border-b",a),...d})}function f({className:a,...d}){return(0,b.jsx)("tbody",{"data-slot":"table-body",className:(0,c.cn)("[&_tr:last-child]:border-0",a),...d})}function g({className:a,...d}){return(0,b.jsx)("tr",{"data-slot":"table-row",className:(0,c.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...d})}function h({className:a,...d}){return(0,b.jsx)("th",{"data-slot":"table-head",className:(0,c.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}function i({className:a,...d}){return(0,b.jsx)("td",{"data-slot":"table-cell",className:(0,c.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}a.s(["Table",()=>d,"TableBody",()=>f,"TableCell",()=>i,"TableHead",()=>h,"TableHeader",()=>e,"TableRow",()=>g])},60157,12981,a=>{"use strict";var b=a.i(87924),c=a.i(54161),d=a.i(64600);function e({status:a}){return(0,b.jsx)(c.Badge,{variant:"outline",className:`${d.STATUS_COLORS[a]} border`,children:d.STATUS_LABELS[a]})}function f({type:a}){return(0,b.jsx)(c.Badge,{variant:"outline",className:`${d.TYPE_COLORS[a]} border`,children:d.TYPE_LABELS[a]})}a.s(["OrderStatusBadge",()=>e],60157),a.s(["OrderTypeBadge",()=>f],12981)},54161,a=>{"use strict";var b=a.i(87924),c=a.i(187),d=a.i(76306),e=a.i(97895);let f=(0,c.cva)("inline-flex items-center justify-center rounded-full border border-transparent px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border-border text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground",ghost:"[a&]:hover:bg-accent [a&]:hover:text-accent-foreground",link:"text-primary underline-offset-4 [a&]:hover:underline"}},defaultVariants:{variant:"default"}});function g({className:a,variant:c="default",asChild:g=!1,...h}){let i=g?d.Slot.Root:"span";return(0,b.jsx)(i,{"data-slot":"badge","data-variant":c,className:(0,e.cn)(f({variant:c}),a),...h})}a.s(["Badge",()=>g])},64600,a=>{"use strict";a.s(["ALL_STATUSES",0,["pending","assigned","picked_up","in_transit","delivered","failed","returning","returned_to_warehouse","cancelled"],"ALL_TYPES",0,["delivery","return_pickup","failed_return"],"ITEMS_PER_PAGE",0,15,"RIYADH_CENTER",0,{lat:24.7136,lng:46.6753},"STATUS_COLORS",0,{pending:"bg-yellow-100 text-yellow-800 border-yellow-300",assigned:"bg-blue-100 text-blue-800 border-blue-300",picked_up:"bg-indigo-100 text-indigo-800 border-indigo-300",in_transit:"bg-purple-100 text-purple-800 border-purple-300",delivered:"bg-green-100 text-green-800 border-green-300",failed:"bg-red-100 text-red-800 border-red-300",returning:"bg-orange-100 text-orange-800 border-orange-300",returned_to_warehouse:"bg-teal-100 text-teal-800 border-teal-300",cancelled:"bg-gray-100 text-gray-800 border-gray-300"},"STATUS_LABELS",0,{pending:"Pending",assigned:"Assigned",picked_up:"Picked Up",in_transit:"In Transit",delivered:"Delivered",failed:"Failed",returning:"Returning",returned_to_warehouse:"Returned",cancelled:"Cancelled"},"TYPE_COLORS",0,{delivery:"bg-blue-100 text-blue-800 border-blue-300",return_pickup:"bg-orange-100 text-orange-800 border-orange-300",failed_return:"bg-red-100 text-red-800 border-red-300"},"TYPE_LABELS",0,{delivery:"Delivery",return_pickup:"Return Pickup",failed_return:"Failed Return"}])},15618,a=>{"use strict";let b=(0,a.i(70106).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],15618)},22985,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(88237),f=a.i(40695),g=a.i(60157),h=a.i(12981),i=a.i(1640),j=a.i(21466),k=a.i(76464),l=a.i(64600),m=a.i(70106);let n=(0,m.default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),o=(0,m.default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);function p({orders:a}){let m=(0,d.useRouter)(),[p,q]=(0,c.useState)(0),r=(0,i.useWarehouseStore)(a=>a.warehouses),s=(0,j.useZoneStore)(a=>a.zones),t=(0,k.useRiderStore)(a=>a.riders),u=Math.ceil(a.length/l.ITEMS_PER_PAGE),v=a.slice(p*l.ITEMS_PER_PAGE,(p+1)*l.ITEMS_PER_PAGE);return 0===a.length?(0,b.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"No orders found."}):(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"rounded-lg border overflow-hidden",children:(0,b.jsxs)(e.Table,{children:[(0,b.jsx)(e.TableHeader,{children:(0,b.jsxs)(e.TableRow,{children:[(0,b.jsx)(e.TableHead,{children:"Order ID"}),(0,b.jsx)(e.TableHead,{children:"Type"}),(0,b.jsx)(e.TableHead,{children:"Customer"}),(0,b.jsx)(e.TableHead,{className:"hidden lg:table-cell",children:"Address"}),(0,b.jsx)(e.TableHead,{className:"hidden md:table-cell",children:"Zone"}),(0,b.jsx)(e.TableHead,{className:"hidden xl:table-cell",children:"Warehouse"}),(0,b.jsx)(e.TableHead,{className:"hidden md:table-cell",children:"Rider"}),(0,b.jsx)(e.TableHead,{children:"Status"}),(0,b.jsx)(e.TableHead,{className:"hidden lg:table-cell",children:"Created"})]})}),(0,b.jsx)(e.TableBody,{children:v.map(a=>{var c;let d,f;return(0,b.jsxs)(e.TableRow,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>m.push(`/orders/${a.id}`),children:[(0,b.jsx)(e.TableCell,{className:"font-mono text-xs",children:a.id}),(0,b.jsx)(e.TableCell,{children:(0,b.jsx)(h.OrderTypeBadge,{type:a.type})}),(0,b.jsx)(e.TableCell,{children:a.customer_name}),(0,b.jsx)(e.TableCell,{className:"hidden lg:table-cell text-xs",children:a.short_national_address}),(0,b.jsx)(e.TableCell,{className:"hidden md:table-cell text-sm",children:(d=a.zone_id,s.find(a=>a.id===d)?.name??d)}),(0,b.jsx)(e.TableCell,{className:"hidden xl:table-cell text-sm",children:(f=a.warehouse_id,r.find(a=>a.id===f)?.name??f)}),(0,b.jsx)(e.TableCell,{className:"hidden md:table-cell text-sm",children:(c=a.rider_id)?t.find(a=>a.id===c)?.full_name??c:"—"}),(0,b.jsx)(e.TableCell,{children:(0,b.jsx)(g.OrderStatusBadge,{status:a.status})}),(0,b.jsx)(e.TableCell,{className:"hidden lg:table-cell text-xs text-muted-foreground",children:new Date(a.created_at).toLocaleDateString("en-SA",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]},a.id)})})]})}),u>1&&(0,b.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Showing ",p*l.ITEMS_PER_PAGE+1,"–",Math.min((p+1)*l.ITEMS_PER_PAGE,a.length)," of"," ",a.length]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(f.Button,{variant:"outline",size:"sm",disabled:0===p,onClick:()=>q(a=>a-1),children:(0,b.jsx)(n,{className:"w-4 h-4"})}),(0,b.jsx)(f.Button,{variant:"outline",size:"sm",disabled:p>=u-1,onClick:()=>q(a=>a+1),children:(0,b.jsx)(o,{className:"w-4 h-4"})})]})]})]})}a.s(["OrderTable",()=>p],22985)},14035,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(15618),f=a.i(40695),g=a.i(5522),h=a.i(87682),i=a.i(22985),j=a.i(1002),k=a.i(1640),l=a.i(21466),m=a.i(64600);function n(){let a=(0,j.useOrderStore)(a=>a.orders),n=(0,k.useWarehouseStore)(a=>a.warehouses),o=(0,l.useZoneStore)(a=>a.zones),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)("all"),[t,u]=(0,c.useState)("all"),[v,w]=(0,c.useState)("all"),[x,y]=(0,c.useState)("all"),z=(0,c.useMemo)(()=>{let b=a;if("all"!==r&&(b=b.filter(a=>a.status===r)),"all"!==t&&(b=b.filter(a=>a.type===t)),"all"!==v&&(b=b.filter(a=>a.warehouse_id===v)),"all"!==x&&(b=b.filter(a=>a.zone_id===x)),p){let a=p.toLowerCase();b=b.filter(b=>b.customer_name.toLowerCase().includes(a)||b.customer_phone.includes(a)||b.short_national_address.toLowerCase().includes(a)||b.id.toLowerCase().includes(a))}return b},[a,r,t,v,x,p]);return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-lg font-semibold",children:"All Orders"}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[z.length," order",1!==z.length?"s":""]})]}),(0,b.jsx)(f.Button,{asChild:!0,children:(0,b.jsxs)(d.default,{href:"/orders/new",children:[(0,b.jsx)(e.Plus,{className:"w-4 h-4 mr-2"}),"New Order"]})})]}),(0,b.jsxs)("div",{className:"flex gap-3 flex-wrap",children:[(0,b.jsx)(g.Input,{placeholder:"Search name, phone, address...",value:p,onChange:a=>q(a.target.value),className:"w-[250px]"}),(0,b.jsxs)(h.Select,{value:r,onValueChange:s,children:[(0,b.jsx)(h.SelectTrigger,{className:"w-[160px]",children:(0,b.jsx)(h.SelectValue,{placeholder:"All Statuses"})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"all",children:"All Statuses"}),m.ALL_STATUSES.map(a=>(0,b.jsx)(h.SelectItem,{value:a,children:m.STATUS_LABELS[a]},a))]})]}),(0,b.jsxs)(h.Select,{value:t,onValueChange:u,children:[(0,b.jsx)(h.SelectTrigger,{className:"w-[160px]",children:(0,b.jsx)(h.SelectValue,{placeholder:"All Types"})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"all",children:"All Types"}),m.ALL_TYPES.map(a=>(0,b.jsx)(h.SelectItem,{value:a,children:m.TYPE_LABELS[a]},a))]})]}),(0,b.jsxs)(h.Select,{value:v,onValueChange:w,children:[(0,b.jsx)(h.SelectTrigger,{className:"w-[200px]",children:(0,b.jsx)(h.SelectValue,{placeholder:"All Warehouses"})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"all",children:"All Warehouses"}),n.map(a=>(0,b.jsx)(h.SelectItem,{value:a.id,children:a.name},a.id))]})]}),(0,b.jsxs)(h.Select,{value:x,onValueChange:y,children:[(0,b.jsx)(h.SelectTrigger,{className:"w-[180px]",children:(0,b.jsx)(h.SelectValue,{placeholder:"All Zones"})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"all",children:"All Zones"}),o.map(a=>(0,b.jsx)(h.SelectItem,{value:a.id,children:a.name},a.id))]})]})]}),(0,b.jsx)(i.OrderTable,{orders:z})]})}a.s(["default",()=>n])}];

//# sourceMappingURL=_107e9f2f._.js.map